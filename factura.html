<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Factura CFDI - Pet Palace</title>

    <!-- Custom stlylesheet -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <!-- Slick -->
    <link rel="stylesheet" href="css/slick.css">
    <link rel="stylesheet" href="css/slick-theme.css">
    <!-- Google font -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700" rel="stylesheet">
    <!-- Bootstrap -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- nouislider -->
    <link rel="stylesheet" href="css/nouislider.min.css">
    <!-- Font Awesome Icon -->
    <link rel="stylesheet" href="css/font-awesome.min.css">

</head>

<body>
    <!-- /HEADER -->
    <header>
        <!-- TOP HEADER -->
        <div id="top-header">
            <div class="container">
                <ul class="header-links pull-left">
                    <li><a><i class="fa fa-phone"></i> +52 449 928 9336</a></li>
                    <li><a href="https://mail.google.com/"><i class="fa fa-envelope-o"></i> petspalace@gmail.com</a>
                    </li>
                    <li><a href="maps.google.com"><i class="fa fa-map-marker"></i> Av. Adolfo López Mateos </a></li>
                </ul>
                <ul class="header-links pull-right">
                    <li><a><i class="fa fa-dollar"></i> MXN</a></li>
                    <li><a href="userprofile.html"><i class="fa fa-user-o"></i> My Account</a></li>
                </ul>
            </div>
        </div>
        <!-- /TOP HEADER -->

        <!-- MAIN HEADER -->
        <div id="header">
            <!-- container -->
            <div class="container">
                <!-- row -->
                <div class="row">
                    <!-- LOGO -->
                    <div class="col-md-3">
                        <div class="header-logo">
                            <a href="index.html" class="logo">
                                <img src="img/logo6.png" alt="">
                            </a>
                        </div>
                    </div>
                    <!-- /LOGO -->

                    <!-- SEARCH BAR -->
                    <div class="col-md-6">
                        <div class="header-search">
                            <form>
                                <select class="input-select">
                                    <option value="0">Category</option>
                                    <option value="1">Accessories</option>
                                    <option value="1">Clothes</option>
                                    <option value="1">Health & Care</option>
                                    <option value="1">Home</option>
                                    <option value="1">Transport</option>
                                </select>
                                <input class="input" placeholder="Search here">
                                <button class="search-btn">Search</button>
                            </form>
                        </div>
                    </div>
                    <!-- /SEARCH BAR -->

                    <!-- ACCOUNT -->
                    <div class="col-md-3 clearfix">
                        <div class="header-ctn">
                            <!-- Wishlist -->
                            <div>
                                <a href="wishlist.html">
                                    <i class="fa fa-heart-o"></i>
                                    <span>Wishlist</span>
                                    <div class="qty wishlist-qty">0</div>
                                </a>
                            </div>
                            <!-- /Wishlist -->

                            <!-- Cart -->
                            <div class="dropdown">
                                <a class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
                                    <i class="fa fa-shopping-cart"></i>
                                    <span>Your Cart</span>
                                    <div class="qty cart-qty">0</div> <!-- CAMBIO: clase única -->
                                </a>
                                <div class="cart-dropdown">
                                    <div class="cart-list">
                                        <!-- Los productos se agregarán aquí con JavaScript -->
                                    </div>
                                    <div class="cart-summary">
                                        <small>0 Item(s) selected</small>
                                        <h5>SUBTOTAL: $0.00</h5>
                                    </div>
                                    <div class="cart-btns">
                                        <a href="#">View Cart</a>
                                        <a href="checkout.html">Checkout <i class="fa fa-arrow-circle-right"></i></a>
                                    </div>
                                </div>
                            </div>
                            <!-- /Cart -->


                            <!-- Menu Toogle -->
                            <div class="menu-toggle">
                                <a href="#">
                                    <i class="fa fa-bars"></i>
                                    <span>Menu</span>
                                </a>
                            </div>
                            <!-- /Menu Toogle -->
                        </div>
                    </div>
                    <!-- /ACCOUNT -->
                </div>
                <!-- row -->
            </div>
            <!-- container -->
        </div>
        <!-- /MAIN HEADER -->
    </header>
    <!-- /HEADER -->

    <!-- Barra de Search Fija -->
    <div class="sticky-space"></div>


    <div class="container">
        <h1>Factura Electrónica CFDI - Pet Palace</h1>

        <section class="seccion">
            <h2>Datos del Emisor y Receptor</h2>
            <div class="info">
                <p><strong>RFC Emisor:</strong> PETP800101XYZ</p>
                <p><strong>Nombre Emisor:</strong> Pet Palace S.A. de C.V.</p>
                <p><strong>RFC Receptor:</strong> MDAF250803HB1</p>
                <p><strong>Nombre Receptor:</strong> Ángel Fabian Moreno Díaz</p>
                <p><strong>Uso CFDI:</strong> G03 - Gastos en general</p>
                <p><strong>Folio Fiscal:</strong> 123ABC456DEF789GHI</p>
                <p><strong>Fecha de Emisión:</strong> 17 de julio de 2025 - 19:25 hrs</p>
            </div>
        </section>

        <section class="seccion">
            <h2>Conceptos Facturados</h2>
            <div class="info">
                <div class="producto">
                    <span>Alimento Premium para Perros 5kg</span>
                    <span>$499.00</span>
                </div>
                <div class="producto">
                    <span>Juguete Interactivo para Gatos</span>
                    <span>$199.00</span>
                </div>
                <p><strong>IVA:</strong> $111.68</p>
                <p><strong>Total:</strong> $809.68 MXN</p>
            </div>
        </section>

        <section class="seccion">
            <h2>Información de Pago</h2>
            <div class="info">
                <p><strong>Método de Pago:</strong> Tarjeta de Débito</p>
                <p><strong>Forma de Pago:</strong> Pago en una sola exhibición</p>
            </div>
        </section>

        <section class="seccion">
            <h2>Sellos y Certificados</h2>
            <div class="info">
                <p><strong>Sello Digital del CFDI:</strong> abc123...XYZ789 (simulado)</p>
                <p><strong>Sello Digital del SAT:</strong> def456...RST987 (simulado)</p>
                <p><strong>Certificado SAT:</strong> 000010000005025068</p>
            </div>
        </section>

        <section class="seccion">
            <h2>Código QR</h2>
            <div class="info qr">
                <img src="https://api.qrserver.com/v1/create-qr-code/?data=CFDI+PetPalace+123ABC456DEF789GHI&size=100x100"
                    alt="QR CFDI">
            </div>
        </section>

        <section class="seccion botones-factura-flotantes">
            <button onclick="descargarFactura()" class="btn-factura">Descargar Factura</button>
            <button onclick="enviarFacturaCorreo()" class="btn-factura">Enviar a Correo</button>
            <div id="mensaje" style="text-align:center; margin-top:10px;"></div>
        </section>
    </div>

    <!-- jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <script>
        const { jsPDF } = window.jspdf;

        async function descargarFactura() {
            const doc = new jsPDF();
            const margenIzq = 20;
            let y = 20;

            // Carga de imágenes como base64
            const loadImageAsBase64 = (src) => {
                return new Promise((resolve) => {
                    const img = new Image();
                    img.crossOrigin = "Anonymous";
                    img.onload = () => {
                        const canvas = document.createElement("canvas");
                        canvas.width = img.width;
                        canvas.height = img.height;
                        const ctx = canvas.getContext("2d");
                        ctx.drawImage(img, 0, 0);
                        resolve(canvas.toDataURL("image/png"));
                    };
                    img.src = src;
                });
            };

            // Carga del logo y QR
            const logoBase64 = await loadImageAsBase64("img/logo6.png");
            const qrBase64 = await loadImageAsBase64("https://api.qrserver.com/v1/create-qr-code/?data=CFDI+PetPalace+123ABC456DEF789GHI&size=100x100");

            // Insertar logo y QR
            doc.addImage(logoBase64, "PNG", 15, 10, 30, 30);
            doc.addImage(qrBase64, "PNG", 160, 10, 30, 30);

            y += 40;

            doc.setFontSize(16);
            doc.setTextColor(30, 136, 229);
            doc.text("Factura Electrónica CFDI", margenIzq, y);
            y += 10;

            doc.setFontSize(10);
            doc.setTextColor(0, 0, 0);
            doc.text(`Emisor: Pet Palace S.A. de C.V. | RFC: PETP800101XYZ`, margenIzq, y); y += 6;
            doc.text(`Receptor: Ángel Fabian Moreno Díaz | RFC: MDAF250803HB1`, margenIzq, y); y += 6;
            doc.text(`Uso CFDI: G03 - Gastos en general`, margenIzq, y); y += 6;
            doc.text(`Folio fiscal: 123ABC456DEF789GHI`, margenIzq, y); y += 6;
            doc.text(`Fecha de emisión: 2025-07-17 19:25 hrs`, margenIzq, y); y += 10;

            // Encabezado tabla
            doc.setFontSize(11);
            doc.setFillColor(200, 200, 200);
            doc.rect(margenIzq, y, 170, 8, 'F');
            doc.text("Descripción", margenIzq + 2, y + 6);
            doc.text("Cantidad", margenIzq + 60, y + 6);
            doc.text("Precio Unit.", margenIzq + 100, y + 6);
            doc.text("Importe", margenIzq + 145, y + 6);
            y += 10;

            const conceptos = [
                { descripcion: "Alimento Premium para Perros 5kg", cantidad: 1, precio: 499.00 },
                { descripcion: "Juguete Interactivo para Gatos", cantidad: 1, precio: 199.00 }
            ];

            let subtotal = 0;
            conceptos.forEach((item) => {
                const importe = item.cantidad * item.precio;
                subtotal += importe;

                doc.text(item.descripcion, margenIzq + 2, y);
                doc.text(`${item.cantidad}`, margenIzq + 63, y);
                doc.text(`$${item.precio.toFixed(2)}`, margenIzq + 100, y);
                doc.text(`$${importe.toFixed(2)}`, margenIzq + 145, y);
                y += 8;
            });

            const iva = subtotal * 0.16;
            const total = subtotal + iva;

            y += 5;
            doc.setFontSize(11);
            doc.text(`Subtotal: $${subtotal.toFixed(2)}`, margenIzq + 110, y); y += 6;
            doc.text(`IVA (16%): $${iva.toFixed(2)}`, margenIzq + 110, y); y += 6;
            doc.text(`Total: $${total.toFixed(2)} MXN`, margenIzq + 110, y); y += 10;

            // Información de pago
            doc.setFontSize(10);
            doc.text(`Método de pago: Tarjeta de Crédito`, margenIzq, y); y += 5;
            doc.text(`Forma de pago: Pago en una sola exhibición`, margenIzq, y); y += 10;

            // Sellos digitales
            doc.setFontSize(9);
            doc.text("Sello digital del CFDI:", margenIzq, y); y += 4;
            doc.text("abc123xyz... (simulado)", margenIzq + 5, y); y += 5;
            doc.text("Sello digital del SAT:", margenIzq, y); y += 4;
            doc.text("def456rst... (simulado)", margenIzq + 5, y); y += 5;
            doc.text("Certificado SAT: 000010000005025068", margenIzq, y); y += 10;

            // Pie
            y = 275;
            doc.setFontSize(9);
            doc.setTextColor(80);
            doc.text("Gracias por tu compra en Pet Palace 🐾", margenIzq, y);

            doc.save("factura_pet_palace_oficial.pdf");
            document.getElementById("mensaje").textContent = "Factura descargada correctamente en formato oficial.";
        }
    </script>

    <script>
        function enviarFacturaCorreo() {
            const mensaje = document.getElementById("mensaje");
            mensaje.textContent = "Enviando factura al correo registrado...";
            setTimeout(() => {
                mensaje.textContent = "Factura enviada correctamente a tu correo (simulado).";
            }, 2500);
        }
    </script>



    <!-- FOOTER -->
    <footer id="footer">
        <!-- top footer -->
        <div class="section">
            <div class="container">
                <div class="row">
                    <!-- About Us -->
                    <div class="col-md-3 col-xs-6">
                        <div class="footer">
                            <h3 class="footer-title">Sobre Nosotros</h3>
                            <p>PetPalace es una tienda en línea para productos de mascotas, con directorio de
                                veterinarios y estilistas para tus compañeros peludos.</p>
                            <ul class="footer-links">
                                <li><a href="#"><i class="fa fa-map-marker"></i> ITA, Aguascalientes, México</a></li>
                                <li><a href="#"><i class="fa fa-phone"></i> +52 449 928 9336</a></li>
                                <li><a href="#"><i class="fa fa-envelope-o"></i> petspalace@gmail.com</a></li>
                            </ul>
                        </div>
                    </div>

                    <!-- Categorías -->
                    <div class="col-md-3 col-xs-6">
                        <div class="footer">
                            <h3 class="footer-title">Categorías</h3>
                            <ul class="footer-links">
                                <li><a href="#">Accesorios</a></li>
                                <li><a href="#">Ropa</a></li>
                                <li><a href="#">Salud y Cuidado</a></li>
                                <li><a href="#">Transporte</a></li>
                                <li><a href="#">Hogar</a></li>
                            </ul>
                        </div>
                    </div>

                    <div class="clearfix visible-xs"></div>

                    <!-- Información -->
                    <div class="col-md-3 col-xs-6">
                        <div class="footer">
                            <h3 class="footer-title">Información</h3>
                            <ul class="footer-links">
                                <li><a href="#">Nosotros</a></li>
                                <li><a href="#">Contacto</a></li>
                                <li><a href="#">Política de Privacidad</a></li>
                                <li><a href="#">Términos y Condiciones</a></li>
                            </ul>
                        </div>
                    </div>

                    <!-- Servicios -->
                    <div class="col-md-3 col-xs-6">
                        <div class="footer">
                            <h3 class="footer-title">Servicio</h3>
                            <ul class="footer-links">
                                <li><a href="#">Mi Cuenta</a></li>
                                <li><a href="#">Carrito</a></li>
                                <li><a href="#">Wishlist</a></li>
                                <li><a href="#">Ayuda</a></li>
                                <li><a href="https://maps.app.goo.gl/k5ZtDzjFcVZyq3sV6" target="_blank">
                                        <i class="fas fa-map-marked-alt"></i> Ubicación</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- bottom footer -->
        <div id="bottom-footer" class="section">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 text-center">
                        <!-- Iconos de métodos de pago -->
                        <ul class="footer-payments">
                            <li><a href="#"><i class="fa fa-cc-visa"></i></a></li>
                            <li><a href="#"><i class="fa fa-credit-card"></i></a></li>
                            <li><a href="#"><i class="fa fa-cc-paypal"></i></a></li>
                            <li><a href="#"><i class="fa fa-cc-mastercard"></i></a></li>
                            <li><a href="#"><i class="fa fa-cc-discover"></i></a></li>
                            <li><a href="#"><i class="fa fa-cc-amex"></i></a></li>
                        </ul>
                        <span class="copyright">
                            &copy;
                            <script>document.write(new Date().getFullYear());</script> Todos los derechos reservados |
                            Hecho <i class="fa fa-heart-o" aria-hidden="true"></i> por
                            <a href="https://aguascalientes.tecnm.mx/" target="_blank">TecNM</a>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- FOOTER -->


    <!-- Redes sociales y soporte -->
    <div class="social-floating">
        <!-- Carrito -->
        <a href="checkout.html" class="floating-cart" title="Ver carrito">
            <i class="fa fa-shopping-cart"></i>
            <span class="cart-count">2</span>
        </a>

        <!-- Facebook -->
        <a href="https://www.facebook.com/profile.php?id=61578271885148
" class="facebook" target="_blank" title="Facebook">
            <i class="fa fa-facebook"></i>
        </a>

        <!-- WhatsApp -->
        <a href="https://wa.me/524499289336" class="whatsapp" target="_blank" title="WhatsApp">
            <i class="fa fa-whatsapp"></i>
        </a>

        <!-- Instagram -->
        <a href="https://www.instagram.com/" class="instagram" target="_blank" title="Instagram">
            <i class="fa fa-instagram"></i>
        </a>

        <!-- Maps -->
        <a href="https://maps.google.com" class="maps" target="_blank" title="Ubicación">
            <i class="fa fa-map-marker"></i>
        </a>
    </div>



</body>

</html>